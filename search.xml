<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[next主题fullimage显示不居中问题]]></title>
    <url>%2F2018%2F01%2F01%2Ftest-art%2F</url>
    <content type="text"><![CDATA[使用好hexo和next搭建好自己的博客之后，就到了等待备案的日子. 小小抱怨一下不得不说备案真是一个让人抓狂的过程，之前对公司备案的繁琐有所经历，没想到个人备案也是不遑多让。服务器是在阿里云上，阿里云在备案方面帮着省去了很多的备案步骤，结果还是弄得我够呛，关于备案在之前的文章有详细提及。 遇到的问题这次是在阅读iissnan大神文档的时候，发现了FullImage的功能，觉得很酷炫，就想着用着试试。结果一直没达到文档中的效果，图片的尺寸是超出700px了，但是愣是不居中，效果有点尴尬。 解决思路和过程开始猜测是next尺寸的问题，翻了半天，发现自己并没有使用custom.yml调整过尺寸，并且尴尬的是不论怎么调整尺寸都还是一样。秉持着”有啥不懂看官方文档”的宗旨，把作者的文档来来回回看了两遍，看自己的配置是否有问题，结果无功而返。然后直接搜索引擎搜是否有朋友有过类似的困扰，也没有搜到。然后继续寻找NexT主题相关社区，想着提个问题什么的，也没找到靠谱活跃的社区。最终在GitHub上找到了十几天前有位朋友开了个一模一样的issue #2039，并且已经在#2043得到了解决。 以上。]]></content>
      <categories>
        <category>技术进步</category>
      </categories>
      <tags>
        <tag>NexT</tag>
        <tag>problems</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F12%2F23%2Fhello-world%2F</url>
    <content type="text"><![CDATA[这是个人网站的第一篇博客，标题就直接用了‘Hello World’。刚开始接触CS的时候，总是略微有些嫌弃‘Hello World’的，可能是这个梗被用得太多，有点嚼烂了的感觉。不过随着时间的推移，越来越喜欢‘Hello world’这个词了。因为每次屏幕上出现的‘Hello World’，总是伴随着新知识的学习，或是新作品的诞生！就像棋手落下的第一子、画家挥下的第一笔…矫情的废话不多说，James’s note主要会记录以下的一些内容。 Tech BlogJames’s note最最主要的作用就是记录关于技术方面的博客，文章，思考，也就是类似于笔记本的作用。关于技术的，不论是长篇大论，还是自己工作中接触到问题的反思和总结,抑或是一个代码片段，都会记录在这边。 Note Life另一方面，主要会记录自己的一些生活经历，出行，有感等等。 Something Else最后，就是一些七七八八的，想要随便写写的杂文了。 At Last希望自己能够多坚持一些，长期，持续地维护好这个主页，在这期间也能持续地不断成长！ More info: HomePage 以上。]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>blog</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[建站请绕道：备案辛酸路]]></title>
    <url>%2F2017%2F10%2F13%2Fbeian%2F</url>
    <content type="text"><![CDATA[自建blog的想法是早就有了的，但是无奈deadline才是第一生产力，这个事情一直拖到前一段时间才得以真正开展。本以为当hexo和NexT两个工具选好了之后，建站对我这个运维来说，不就是分分钟的事情么？可是…我终究还是naive啊。 响应党的号召：备案光荣在namecheap上成功买了域名（PS.不得不说namecheap的服务是真的比狗爹好多了）；就着手在aliyun上买ecs，结果一犯二就买了华南的服务器，当时我并不知道我将会面对什么。修改好dns_server，待其生效便调试了起来，然后就收到党的号召，需要备案。一直以来，我都是一个根正苗红，又红又专的好青年，对于党的这种无理的要求，你问我支不支持，我当然支持。于是我就走上了备案这条不归路。 阿里云建站许久之前刚入行的时候，记得那时候备案是真心麻烦，需要带着你的各种证件，去到专门的“有关部门”，各种拍照，审查，必须经历很长的周期才能成功。现在因为是在阿里云买了服务器，阿里也和审查机构简化了一些流程，现在只需要在阿里云上upload一些文件和证件，似乎就可以备案成功了。 一波三折之所以是“似乎”，是当我开开心心上传各种资料的时候，发现除了身份证、手机号之外，赫然还需要居住证。当时我就蒙蔽了，“身份证信息如非上海市需提供上海市‘临时居住证’或‘居住证’”。难道还专门为了这事去有关部门办一个暂住证？知乎上一问，发现并不是所有地区的备案都需要暂住证，四川、福建等地方是不需要的。所以备案时你所在的地址填这些地方即可。然后顺利拍摄好各种资料上传完成，可不到一天，就被短信告知备案初审就没通过。还是要夸一下阿里云的工作人员的服务，第一时间电话和我沟通，非常仔细地告诉我哪些地方需要修改，然后还给了我一些小建议。还能怎么办呢？挨个解决问题呗。 域名持有者与主办单位不一致其实就是我在namecheap上填写的所有者的名字并不是我的真名（全拼也可以），关于域名的所有者，到任意一个whois网站上可以查询到域名的所有者，当然要放开namecheap上的whois privacy才能查到，你可以试试自己的域名的whois是谁。在namecheap的控制页上，找了半天还找不到修改域名所有者的操作，索性直接找了他们的客服帮忙修改，服务态度也是很好，虽然我的英语是真的烂。 网站名称不合格网站名称不能为“xxx的个人网站”等各种要求，随便改一个名字就可以了。 未取得备案号禁止访问我在申请好域名，配置好DNS之后就尝试着起了web服务调试了起来，好吧，这也是不行的，先关闭呗。 再次提交改好了以上三项，再次提交，很顺利地通过了初审。然后过了大概三天，通知我已经提交管局审核，看起来一切都是那么顺利。结果一天之后，再次传来审核失败的消息。“域名不存在注册商验证库中”，简单来说呢，就是域名是国外的，是有关部门无法掌控的，有关部门希望你把域名转回到国内的服务商来托管。简直了，当时心里有句MMP，也就大声讲了一万多遍。所以摆在我面前的唯一出路，就是将放在namecheap上的域名转回到万网上来。出路是有出路，可是怎么就感觉那么操蛋呢？我只是想简简单单弄个小网站而已…最后我毅然选择不走这条转域名的唯一出路，又弄了一台香港的服务器，项目往上一部署，DNS一修改，齐活。备案？爱谁谁吧！ 经验总结写这么多，经验总结就是老老实实域名服务器都买国外的吧，别把时间浪费在备案上面了。 以上。]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>blog</tag>
        <tag>建站</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkins+ansible持续集成之自动发布脚本]]></title>
    <url>%2F2017%2F08%2F03%2Fansi-ci%2F</url>
    <content type="text"><![CDATA[工作中使用jenkins已经很久了，很早就想总结一下自己的一些使用情况，本文主要记录一下自动发布的模板脚本。 首先说明jenkins无疑是近几年来最炙手可热的持续集成工具，功能强大，插件应有尽有，社区活跃，且被众多大公司实际生产中应用。关于jenkins，在此就不详细介绍了（主要是我也还远没了解透彻）。要想详细了解jenkins，请直接查看官方文档有详细提及。 主要应用点jenkins是一个功能强大的工具，但我司目前还只是用来做自动拉取代码、打包、发布这几项工作，主要涉及的工具是jenkins和ansible。使用jenkins自动拉取代码，自动构建，ansible完成发布工作。 简单讲解jenkins中主要是使用了maven（针对maven项目）和git两个插件.ansible则可以使用command_line、play_book或者role都可以。由于应用环境简单，我直接使用了ansible的command_line。 jenkins中的shell1sh /deploy/jenkins_deploy_$&#123;JOB_NAME&#125;.sh jenkins-deploy-${JOB_NAME}.sh123456789101112131415161718192021#定义应用变量和应用目录，发布其它应用只需要把APP的值修改成相应的,比如APP=demo.war#需要修改APP这一处即可APP=app_name#定义发布应用的脚本变量，发布其它应用需要把DEPLOY_APP的值修改成相应的，DEPLOY_APP=deploy_$&#123;APP&#125;.sh#定义部署服务器组webservers=$&#123;APP&#125;DEP_PATH=dep_pathPAK_PATH=pak_path#应用服务器创建deploy目录ansible $webservers -u appsvr -m shell -a "mkdir -p $&#123;DEP_PATH&#125;"#将war包复制到应用服务器的/deployansible $webservers -u appsvr -m copy -a "src=$&#123;PAK_PATH&#125;/$&#123;APP&#125;-1.0-SNAPSHOT.jar dest=$&#123;DEP_PATH&#125; owner=appsvr group=appsvr mode=0755 "#将构建ID号复制到应用服务器的/deploy下#ansible $webservers -u qappsom -m copy -a "src=/deploy/$LASTBUILD dest=/deploy/ owner=qappsom group=grpadm mode=0755 "#将部署脚本复制到应用服务器的/deploy下ansible $webservers -u appsvr -m copy -a "src=$&#123;DEP_PATH&#125;/$DEPLOY_APP dest=$&#123;DEP_PATH&#125; owner=appsvr group=appsvr mode=0644 "#执行发布脚本ansible $webservers -u appsvr -m shell -a "sh /$&#123;DEP_PATH&#125;/$&#123;DEPLOY_APP&#125;" -f 1 deploy_${JOB_NAME}.sh1234567891011121314151617181920212223242526272829303132333435363738#如果新增模块，只需复制本脚本，然后把APP的变量值改成相对应的模块名即可。比如,APP=oms#只需要改1处source /etc/profileAPP=app_nameNOW=`date +%Y%m%d-%H%M%S`BACKUP_PATH=back_pathAPP_PATH=app_pathDEP_PATH=dep_pathJAR_NAME=$&#123;APP&#125;-xxx.jar###先确定是否存在备份目录，不存在则创建if [ ! -d "$&#123;BACKUP_PATH&#125;" ]then mkdir -p $&#123;BACKUP_PATH&#125;fi###备份原有jar包，加上时间后缀if [ -f "$&#123;APP_PATH&#125;/$&#123;JAR_NAME&#125;" ]then cp -v $&#123;APP_PATH&#125;/$&#123;JAR_NAME&#125; $&#123;BACKUP_PATH&#125;/$&#123;JAR_NAME&#125;_bak$&#123;NOW&#125; echo "backup is done !"else mkdir -p $&#123;APP_PATH&#125; echo "this is the first time delpoying the $APP !"fi###覆盖应用jar包，重启服务cp -v $&#123;DEP_PATH&#125;$&#123;JAR_NAME&#125; $&#123;APP_PATH&#125;/echo "copying $&#123;JAR_NAME&#125; to $&#123;APP_PATH&#125; down!"until ! [ $(ps -ef|grep "$&#123;JAR_NAME&#125;"|grep -v grep|awk '&#123;print$2&#125;') ];do echo -e "\033[32m [INFO]: killing the $&#123;APP&#125; process ... \033[0m" ps -ef|grep "$&#123;JAR_NAME&#125;"|grep -v grep|awk '&#123;print$2&#125;'|xargs kill sleep 3doneecho "restarting new $&#123;APP&#125; process..."nohup $&#123;JAVA_HOME&#125;/bin/java -jar $&#123;APP_PATH&#125;/$&#123;JAR_NAME&#125; &gt; /dev/null 2&gt;&amp;1 &amp;echo "The $&#123;APP&#125; has stated ! "ps -ef|grep "$&#123;JAR_NAME&#125;"|grep -v grepexit 以上。]]></content>
      <categories>
        <category>技术进步</category>
      </categories>
      <tags>
        <tag>ansible</tag>
        <tag>jenkins</tag>
      </tags>
  </entry>
</search>
